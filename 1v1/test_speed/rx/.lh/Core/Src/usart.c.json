{
    "sourceFile": "Core/Src/usart.c",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1624505107339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1624505107339,
            "name": "Commit-0",
            "content": "/**\r\n  ******************************************************************************\r\n  * @file    usart.c\r\n  * @brief   This file provides code for the configuration\r\n  *          of the USART instances.\r\n  ******************************************************************************\r\n  * @attention\r\n  *\r\n  * <h2><center>&copy; Copyright (c) 2021 STMicroelectronics.\r\n  * All rights reserved.</center></h2>\r\n  *\r\n  * This software component is licensed by ST under BSD 3-Clause license,\r\n  * the \"License\"; You may not use this file except in compliance with the\r\n  * License. You may obtain a copy of the License at:\r\n  *                        opensource.org/licenses/BSD-3-Clause\r\n  *\r\n  ******************************************************************************\r\n  */\r\n\r\n/* Includes ------------------------------------------------------------------*/\r\n#include \"usart.h\"\r\n#include <stdio.h>\r\n/* USER CODE BEGIN 0 */\r\n\r\n/* USER CODE END 0 */\r\n\r\nUART_HandleTypeDef huart1;\r\n\r\n/* USART1 init function */\r\n\r\nvoid MX_USART1_UART_Init(void)\r\n{\r\n\r\n  /* USER CODE BEGIN USART1_Init 0 */\r\n\r\n  /* USER CODE END USART1_Init 0 */\r\n\r\n  /* USER CODE BEGIN USART1_Init 1 */\r\n\r\n  /* USER CODE END USART1_Init 1 */\r\n  huart1.Instance = USART1;\r\n  huart1.Init.BaudRate = 9600;\r\n  huart1.Init.WordLength = UART_WORDLENGTH_8B;\r\n  huart1.Init.StopBits = UART_STOPBITS_1;\r\n  huart1.Init.Parity = UART_PARITY_NONE;\r\n  huart1.Init.Mode = UART_MODE_TX_RX;\r\n  huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;\r\n  huart1.Init.OverSampling = UART_OVERSAMPLING_16;\r\n  if (HAL_UART_Init(&huart1) != HAL_OK)\r\n  {\r\n    Error_Handler();\r\n  }\r\n  /* USER CODE BEGIN USART1_Init 2 */\r\n\r\n  /* USER CODE END USART1_Init 2 */\r\n\r\n}\r\n\r\nvoid HAL_UART_MspInit(UART_HandleTypeDef* uartHandle)\r\n{\r\n\r\n  GPIO_InitTypeDef GPIO_InitStruct = {0};\r\n  if(uartHandle->Instance==USART1)\r\n  {\r\n  /* USER CODE BEGIN USART1_MspInit 0 */\r\n\r\n  /* USER CODE END USART1_MspInit 0 */\r\n    /* USART1 clock enable */\r\n    __HAL_RCC_USART1_CLK_ENABLE();\r\n\r\n    __HAL_RCC_GPIOA_CLK_ENABLE();\r\n    /**USART1 GPIO Configuration\r\n    PA9     ------> USART1_TX\r\n    PA10     ------> USART1_RX\r\n    */\r\n    GPIO_InitStruct.Pin = GPIO_PIN_9|GPIO_PIN_10;\r\n    GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;\r\n    GPIO_InitStruct.Pull = GPIO_NOPULL;\r\n    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;\r\n    GPIO_InitStruct.Alternate = GPIO_AF7_USART1;\r\n    HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);\r\n\r\n  /* USER CODE BEGIN USART1_MspInit 1 */\r\n\r\n  /* USER CODE END USART1_MspInit 1 */\r\n  }\r\n}\r\n\r\nvoid HAL_UART_MspDeInit(UART_HandleTypeDef* uartHandle)\r\n{\r\n\r\n  if(uartHandle->Instance==USART1)\r\n  {\r\n  /* USER CODE BEGIN USART1_MspDeInit 0 */\r\n\r\n  /* USER CODE END USART1_MspDeInit 0 */\r\n    /* Peripheral clock disable */\r\n    __HAL_RCC_USART1_CLK_DISABLE();\r\n\r\n    /**USART1 GPIO Configuration\r\n    PA9     ------> USART1_TX\r\n    PA10     ------> USART1_RX\r\n    */\r\n    HAL_GPIO_DeInit(GPIOA, GPIO_PIN_9|GPIO_PIN_10);\r\n\r\n  /* USER CODE BEGIN USART1_MspDeInit 1 */\r\n\r\n  /* USER CODE END USART1_MspDeInit 1 */\r\n  }\r\n}\r\n\r\n/* USER CODE BEGIN 1 */\r\nint __io_putchar(int ch)\r\n{\r\n    while ((USART1->SR & 0X40) == 0);\r\n    USART1->DR = (uint8_t) ch;\r\n    return ch;\r\n}\r\n\r\n__attribute__((weak)) int _write(int file, char *ptr, int len)\r\n{\r\n\tint DataIdx;\r\n\tfor (DataIdx = 0; DataIdx < len; DataIdx++)\r\n\t{\r\n\t\t__io_putchar(*ptr++);\r\n\t}\r\n\treturn len;\r\n}\r\n/* USER CODE END 1 */\r\n\r\n/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/\r\n"
        }
    ]
}